/* 1. FONT IMPORT */
@import url("https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    font-family: "Plus Jakarta Sans", sans-serif;
  }

  html {
    -webkit-tap-highlight-color: transparent;
    scroll-behavior: smooth;
  }

  /* --- GLOBAL SMOOTH TRANSITION FIX --- */
  /* Kunci Dark Mode Mulus:
     Menerapkan transisi pada semua properti berbasis WARNA.
     Kita menambahkan 'caret-color' (kursor ketik) dan 'outline-color' agar detail kecil juga halus.
  */
  *,
  ::before,
  ::after {
    transition-property: color, background-color, border-color,
      text-decoration-color, fill, stroke, box-shadow, caret-color,
      outline-color;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
  }

  body {
    /* Prevent Pull-to-Refresh & Rubber banding effect di Mobile agar terasa seperti Native App */
    overscroll-behavior-y: none;

    /* Font Smoothing untuk teks lebih tajam */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    @apply m-0 p-0 bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 selection:bg-emerald-500/30;
  }

  /* Mencegah seleksi teks/gambar yang tidak sengaja pada elemen UI */
  img,
  svg,
  button,
  a {
    user-select: none;
    -webkit-user-drag: none;
  }
}

@layer components {
  /* --- AUTOFILL STYLE FIX --- */
  /* Mengatasi background kuning/putih default browser saat autofill form */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-background-clip: text;
    -webkit-text-fill-color: #0f172a; /* Slate 900 */
    transition: background-color 5000s ease-in-out 0s;
    box-shadow: inset 0 0 20px 20px #f8fafc29; /* Light mode bg adjustment */
  }

  .dark input:-webkit-autofill,
  .dark input:-webkit-autofill:hover,
  .dark input:-webkit-autofill:focus,
  .dark input:-webkit-autofill:active {
    -webkit-text-fill-color: #f1f5f9; /* Slate 100 */
    box-shadow: inset 0 0 20px 20px #0f172a29; /* Dark mode bg adjustment */
  }
}

@layer utilities {
  /* --- SAFE AREA UTILITIES (Notch/Dynamic Island Support) --- */
  .pt-safe-t {
    padding-top: env(safe-area-inset-top, 0px);
  }
  .pb-safe-b {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  .pl-safe-l {
    padding-left: env(safe-area-inset-left, 0px);
  }
  .pr-safe-r {
    padding-right: env(safe-area-inset-right, 0px);
  }

  .mt-safe-t {
    margin-top: env(safe-area-inset-top, 0px);
  }
  .mb-safe-b {
    margin-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Padding khusus bottom nav agar tidak tertutup Home Indicator iOS */
  .pb-safe-nav {
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 1rem);
  }

  /* --- HIDE SCROLLBAR (Mobile Style) --- */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* --- VISUAL EFFECTS --- */

  /* Mask Gradient: Membuat efek pudar di kiri/kanan container yang bisa discroll */
  .mask-gradient {
    mask-image: linear-gradient(
      to right,
      transparent,
      black 15px,
      black calc(100% - 15px),
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      black 15px,
      black calc(100% - 15px),
      transparent
    );
  }

  /* Glassmorphism Preset */
  .glass {
    @apply bg-white/70 dark:bg-slate-900/70 backdrop-blur-md border border-white/20 dark:border-slate-700/30 shadow-lg;
  }
}

/* --- DESKTOP CUSTOM SCROLLBAR (Modern & Minimalis) --- */
/* Hanya aktif pada device dengan kursor (Desktop) */
@media (hover: hover) {
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 transparent;
  }

  .dark .custom-scrollbar {
    scrollbar-color: #334155 transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    /* bg-clip-content + border transparan membuat efek scrollbar 'melayang' (ada jarak dari tepi) */
    background-color: #cbd5e1;
    border-radius: 9999px;
    border: 2px solid transparent;
    background-clip: content-box;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: #94a3b8;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: #334155;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: #475569;
  }
}
